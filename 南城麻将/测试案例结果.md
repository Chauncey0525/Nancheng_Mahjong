# 10个复杂测试案例结果

## 案例1：自摸平胡，有杠分，有码

**输入信息:**
- 玩家信息:
  - 东方: 码数=2, 庄家=是
  - 南方: 码数=1, 庄家=否
  - 西方: 码数=3, 庄家=否
  - 北方: 码数=0, 庄家=否
- 胡牌信息:
  - 胡牌者: 东方
  - 胡牌类型: 平胡
  - 方式: 自摸
- 杠分信息:
  - 1. 点杠: 南方捡杠，西方点杠

**计算结果:**
- 玩家: 东方
  - 总分（未乘本方码）: +10分
  - 明细:
    - 对南方: +0分 (基础分:+0, 码数:1, 倍数:2)
    - 对西方: +8分 (基础分:+2, 码数:3, 倍数:4)
    - 对北方: +2分 (基础分:+2, 码数:0, 倍数:1)
- 玩家: 南方
  - 总分（未乘本方码）: +9分
  - 明细:
    - 对东方: +0分 (基础分:+0, 码数:2, 倍数:3)
    - 对西方: +8分 (基础分:+2, 码数:3, 倍数:4)
    - 对北方: +1分 (基础分:+1, 码数:0, 倍数:1)
- 玩家: 西方
  - 总分（未乘本方码）: -10分
  - 明细:
    - 对东方: -6分 (基础分:-2, 码数:2, 倍数:3)
    - 对南方: -4分 (基础分:-2, 码数:1, 倍数:2)
    - 对北方: +0分 (基础分:+0, 码数:0, 倍数:1)
- 玩家: 北方
  - 总分（未乘本方码）: -8分
  - 明细:
    - 对东方: -6分 (基础分:-2, 码数:2, 倍数:3)
    - 对南方: -2分 (基础分:-1, 码数:1, 倍数:2)
    - 对西方: +0分 (基础分:+0, 码数:3, 倍数:4)

**验证:** 
- 所有玩家的totalScore（已乘本方码）之和 = 0 ✓
- 所有玩家的subTotalScore（未乘本方码）之和 = 1 ✗ (应该为0)

---

## 案例2：点炮打烂，一炮双响，有暗杠

**输入信息:**
- 玩家信息:
  - 东方: 码数=1, 庄家=否
  - 南方: 码数=2, 庄家=是
  - 西方: 码数=1, 庄家=否
  - 北方: 码数=3, 庄家=否
- 胡牌信息:
  - 胡牌者: 东方, 南方
  - 胡牌类型: 打烂, 打烂
  - 方式: 点炮
  - 点炮者: 北方
  - 一炮多响: 东方, 南方
- 杠分信息:
  - 1. 暗杠: 西方暗杠

**计算结果:**
- 玩家: 东方
  - 总分（未乘本方码）: +4分
  - 明细:
    - 对南方: +0分 (基础分:+0, 码数:2, 倍数:3)
    - 对西方: -4分 (基础分:-2, 码数:1, 倍数:2)
    - 对北方: +8分 (基础分:+2, 码数:3, 倍数:4)
- 玩家: 南方
  - 总分（未乘本方码）: +8分
  - 明细:
    - 对东方: +0分 (基础分:+0, 码数:1, 倍数:2)
    - 对西方: -8分 (基础分:-4, 码数:1, 倍数:2)
    - 对北方: +16分 (基础分:+4, 码数:3, 倍数:4)
- 玩家: 西方
  - 总分（未乘本方码）: +24分
  - 明细:
    - 对东方: +4分 (基础分:+2, 码数:1, 倍数:2)
    - 对南方: +12分 (基础分:+4, 码数:2, 倍数:3)
    - 对北方: +8分 (基础分:+2, 码数:3, 倍数:4)
- 玩家: 北方
  - 总分（未乘本方码）: -20分
  - 明细:
    - 对东方: -4分 (基础分:-2, 码数:1, 倍数:2)
    - 对南方: -12分 (基础分:-4, 码数:2, 倍数:3)
    - 对西方: -4分 (基础分:-2, 码数:1, 倍数:2)

**验证:** 
- 所有玩家的totalScore（已乘本方码）之和 = 0 ✓
- 所有玩家的subTotalScore（未乘本方码）之和 = 16 ✗ (应该为0)

---

## 案例3：自摸七星，有多个杠（点杠+暗杠）

**输入信息:**
- 玩家信息:
  - 东方: 码数=0, 庄家=否
  - 南方: 码数=2, 庄家=否
  - 西方: 码数=1, 庄家=是
  - 北方: 码数=4, 庄家=否
- 胡牌信息:
  - 胡牌者: 西方
  - 胡牌类型: 七星
  - 方式: 自摸
- 杠分信息:
  - 1. 点杠: 东方捡杠，南方点杠
  - 2. 暗杠: 北方暗杠

**计算结果:**
- 玩家: 东方
  - 总分（未乘本方码）: -11分
  - 明细:
    - 对南方: +6分 (基础分:+2, 码数:2, 倍数:3)
    - 对西方: -12分 (基础分:-6, 码数:1, 倍数:2)
    - 对北方: -5分 (基础分:-1, 码数:4, 倍数:5)
- 玩家: 南方
  - 总分（未乘本方码）: -28分
  - 明细:
    - 对东方: -2分 (基础分:-2, 码数:0, 倍数:1)
    - 对西方: -16分 (基础分:-8, 码数:1, 倍数:2)
    - 对北方: -10分 (基础分:-2, 码数:4, 倍数:5)
- 玩家: 西方
  - 总分（未乘本方码）: +50分
  - 明细:
    - 对东方: +6分 (基础分:+6, 码数:0, 倍数:1)
    - 对南方: +24分 (基础分:+8, 码数:2, 倍数:3)
    - 对北方: +20分 (基础分:+4, 码数:4, 倍数:5)
- 玩家: 北方
  - 总分（未乘本方码）: -1分
  - 明细:
    - 对东方: +1分 (基础分:+1, 码数:0, 倍数:1)
    - 对南方: +6分 (基础分:+2, 码数:2, 倍数:3)
    - 对西方: -8分 (基础分:-4, 码数:1, 倍数:2)

**验证:** 
- 所有玩家的totalScore（已乘本方码）之和 = 0 ✓
- 所有玩家的subTotalScore（未乘本方码）之和 = 10 ✗ (应该为0)

---

## 案例4：点炮碰碰胡，一炮三响，庄家点炮

**输入信息:**
- 玩家信息:
  - 东方: 码数=1, 庄家=否
  - 南方: 码数=2, 庄家=是
  - 西方: 码数=0, 庄家=否
  - 北方: 码数=1, 庄家=否
- 胡牌信息:
  - 胡牌者: 东方, 西方, 北方
  - 胡牌类型: 碰碰胡, 碰碰胡, 碰碰胡
  - 方式: 点炮
  - 点炮者: 南方
  - 一炮多响: 东方, 西方, 北方

**计算结果:**
- 玩家: 东方
  - 总分（未乘本方码）: +30分
  - 明细:
    - 对南方: +30分 (基础分:+10, 码数:2, 倍数:3)
    - 对西方: +0分 (基础分:+0, 码数:0, 倍数:1)
    - 对北方: +0分 (基础分:+0, 码数:1, 倍数:2)
- 玩家: 南方
  - 总分（未乘本方码）: -50分
  - 明细:
    - 对东方: -20分 (基础分:-10, 码数:1, 倍数:2)
    - 对西方: -10分 (基础分:-10, 码数:0, 倍数:1)
    - 对北方: -20分 (基础分:-10, 码数:1, 倍数:2)
- 玩家: 西方
  - 总分（未乘本方码）: +30分
  - 明细:
    - 对东方: +0分 (基础分:+0, 码数:1, 倍数:2)
    - 对南方: +30分 (基础分:+10, 码数:2, 倍数:3)
    - 对北方: +0分 (基础分:+0, 码数:1, 倍数:2)
- 玩家: 北方
  - 总分（未乘本方码）: +30分
  - 明细:
    - 对东方: +0分 (基础分:+0, 码数:1, 倍数:2)
    - 对南方: +30分 (基础分:+10, 码数:2, 倍数:3)
    - 对西方: +0分 (基础分:+0, 码数:0, 倍数:1)

**验证:** 
- 所有玩家的totalScore（已乘本方码）之和 = 0 ✓
- 所有玩家的subTotalScore（未乘本方码）之和 = 40 ✗ (应该为0)

---

## 案例5：自摸七对，有码，庄家胡牌

**输入信息:**
- 玩家信息:
  - 东方: 码数=3, 庄家=是
  - 南方: 码数=1, 庄家=否
  - 西方: 码数=2, 庄家=否
  - 北方: 码数=0, 庄家=否
- 胡牌信息:
  - 胡牌者: 东方
  - 胡牌类型: 七对
  - 方式: 自摸
- 杠分信息:
  - 1. 点杠: 南方捡杠，西方点杠

**计算结果:**
- 玩家: 东方
  - 总分（未乘本方码）: +68分
  - 明细:
    - 对南方: +20分 (基础分:+10, 码数:1, 倍数:2)
    - 对西方: +36分 (基础分:+12, 码数:2, 倍数:3)
    - 对北方: +12分 (基础分:+12, 码数:0, 倍数:1)
- 玩家: 南方
  - 总分（未乘本方码）: -33分
  - 明细:
    - 对东方: -40分 (基础分:-10, 码数:3, 倍数:4)
    - 对西方: +6分 (基础分:+2, 码数:2, 倍数:3)
    - 对北方: +1分 (基础分:+1, 码数:0, 倍数:1)
- 玩家: 西方
  - 总分（未乘本方码）: -52分
  - 明细:
    - 对东方: -48分 (基础分:-12, 码数:3, 倍数:4)
    - 对南方: -4分 (基础分:-2, 码数:1, 倍数:2)
    - 对北方: +0分 (基础分:+0, 码数:0, 倍数:1)
- 玩家: 北方
  - 总分（未乘本方码）: -50分
  - 明细:
    - 对东方: -48分 (基础分:-12, 码数:3, 倍数:4)
    - 对南方: -2分 (基础分:-1, 码数:1, 倍数:2)
    - 对西方: +0分 (基础分:+0, 码数:2, 倍数:3)

**验证:** 
- 所有玩家的totalScore（已乘本方码）之和 = 0 ✓
- 所有玩家的subTotalScore（未乘本方码）之和 = -67 ✗ (应该为0)

---

## 案例6：点炮清一色，有多个点杠

**输入信息:**
- 玩家信息:
  - 东方: 码数=2, 庄家=否
  - 南方: 码数=1, 庄家=否
  - 西方: 码数=3, 庄家=是
  - 北方: 码数=1, 庄家=否
- 胡牌信息:
  - 胡牌者: 东方
  - 胡牌类型: 清一色
  - 方式: 点炮
  - 点炮者: 西方
- 杠分信息:
  - 1. 点杠: 南方捡杠，北方点杠
  - 2. 点杠: 西方捡杠，南方点杠

**计算结果:**
- 玩家: 东方
  - 总分（未乘本方码）: +46分
  - 明细:
    - 对南方: -2分 (基础分:-1, 码数:1, 倍数:2)
    - 对西方: +48分 (基础分:+12, 码数:3, 倍数:4)
    - 对北方: +0分 (基础分:+0, 码数:1, 倍数:2)
- 玩家: 南方
  - 总分（未乘本方码）: -1分
  - 明细:
    - 对东方: +3分 (基础分:+1, 码数:2, 倍数:3)
    - 对西方: -8分 (基础分:-2, 码数:3, 倍数:4)
    - 对北方: +4分 (基础分:+2, 码数:1, 倍数:2)
- 玩家: 西方
  - 总分（未乘本方码）: -28分
  - 明细:
    - 对东方: -36分 (基础分:-12, 码数:2, 倍数:3)
    - 对南方: +4分 (基础分:+2, 码数:1, 倍数:2)
    - 对北方: +4分 (基础分:+2, 码数:1, 倍数:2)
- 玩家: 北方
  - 总分（未乘本方码）: -12分
  - 明细:
    - 对东方: +0分 (基础分:+0, 码数:2, 倍数:3)
    - 对南方: -4分 (基础分:-2, 码数:1, 倍数:2)
    - 对西方: -8分 (基础分:-2, 码数:3, 倍数:4)

**验证:** 
- 所有玩家的totalScore（已乘本方码）之和 = 0 ✓
- 所有玩家的subTotalScore（未乘本方码）之和 = 5 ✗ (应该为0)

---

## 案例7：自摸清一色碰碰胡，有暗杠，高码

**输入信息:**
- 玩家信息:
  - 东方: 码数=5, 庄家=否
  - 南方: 码数=3, 庄家=否
  - 西方: 码数=4, 庄家=是
  - 北方: 码数=2, 庄家=否
- 胡牌信息:
  - 胡牌者: 东方
  - 胡牌类型: 清一色碰碰胡
  - 方式: 自摸
- 杠分信息:
  - 1. 暗杠: 南方暗杠

**计算结果:**
- 玩家: 东方
  - 总分（未乘本方码）: +162分
  - 明细:
    - 对南方: +32分 (基础分:+8, 码数:3, 倍数:4)
    - 对西方: +100分 (基础分:+20, 码数:4, 倍数:5)
    - 对北方: +30分 (基础分:+10, 码数:2, 倍数:3)
- 玩家: 南方
  - 总分（未乘本方码）: -22分
  - 明细:
    - 对东方: -48分 (基础分:-8, 码数:5, 倍数:6)
    - 对西方: +20分 (基础分:+4, 码数:4, 倍数:5)
    - 对北方: +6分 (基础分:+2, 码数:2, 倍数:3)
- 玩家: 西方
  - 总分（未乘本方码）: -136分
  - 明细:
    - 对东方: -120分 (基础分:-20, 码数:5, 倍数:6)
    - 对南方: -16分 (基础分:-4, 码数:3, 倍数:4)
    - 对北方: +0分 (基础分:+0, 码数:2, 倍数:3)
- 玩家: 北方
  - 总分（未乘本方码）: -68分
  - 明细:
    - 对东方: -60分 (基础分:-10, 码数:5, 倍数:6)
    - 对南方: -8分 (基础分:-2, 码数:3, 倍数:4)
    - 对西方: +0分 (基础分:+0, 码数:4, 倍数:5)

**验证:** 
- 所有玩家的totalScore（已乘本方码）之和 = 0 ✓
- 所有玩家的subTotalScore（未乘本方码）之和 = -64 ✗ (应该为0)

---

## 案例8：点炮清一色七对，一炮双响，有码

**输入信息:**
- 玩家信息:
  - 东方: 码数=2, 庄家=否
  - 南方: 码数=1, 庄家=是
  - 西方: 码数=0, 庄家=否
  - 北方: 码数=3, 庄家=否
- 胡牌信息:
  - 胡牌者: 东方, 西方
  - 胡牌类型: 清一色七对, 清一色七对
  - 方式: 点炮
  - 点炮者: 北方
  - 一炮多响: 东方, 西方
- 杠分信息:
  - 1. 点杠: 南方捡杠，东方点杠

**计算结果:**
- 玩家: 东方
  - 总分（未乘本方码）: +32分
  - 明细:
    - 对南方: -8分 (基础分:-4, 码数:1, 倍数:2)
    - 对西方: +0分 (基础分:+0, 码数:0, 倍数:1)
    - 对北方: +40分 (基础分:+10, 码数:3, 倍数:4)
- 玩家: 南方
  - 总分（未乘本方码）: +22分
  - 明细:
    - 对东方: +12分 (基础分:+4, 码数:2, 倍数:3)
    - 对西方: +2分 (基础分:+2, 码数:0, 倍数:1)
    - 对北方: +8分 (基础分:+2, 码数:3, 倍数:4)
- 玩家: 西方
  - 总分（未乘本方码）: +36分
  - 明细:
    - 对东方: +0分 (基础分:+0, 码数:2, 倍数:3)
    - 对南方: -4分 (基础分:-2, 码数:1, 倍数:2)
    - 对北方: +40分 (基础分:+10, 码数:3, 倍数:4)
- 玩家: 北方
  - 总分（未乘本方码）: -44分
  - 明细:
    - 对东方: -30分 (基础分:-10, 码数:2, 倍数:3)
    - 对南方: -4分 (基础分:-2, 码数:1, 倍数:2)
    - 对西方: -10分 (基础分:-10, 码数:0, 倍数:1)

**验证:** 
- 所有玩家的totalScore（已乘本方码）之和 = 0 ✓
- 所有玩家的subTotalScore（未乘本方码）之和 = 46 ✗ (应该为0)

---

## 案例9：荒庄，只有杠分和码

**输入信息:**
- 玩家信息:
  - 东方: 码数=2, 庄家=是
  - 南方: 码数=1, 庄家=否
  - 西方: 码数=3, 庄家=否
  - 北方: 码数=0, 庄家=否
- 荒庄（流局）
- 杠分信息:
  - 1. 点杠: 东方捡杠，南方点杠
  - 2. 暗杠: 西方暗杠

**计算结果:**
- 玩家: 东方
  - 总分（未乘本方码）: +2分
  - 明细:
    - 对南方: +8分 (基础分:+4, 码数:1, 倍数:2)
    - 对西方: -8分 (基础分:-2, 码数:3, 倍数:4)
    - 对北方: +2分 (基础分:+2, 码数:0, 倍数:1)
- 玩家: 南方
  - 总分（未乘本方码）: -20分
  - 明细:
    - 对东方: -12分 (基础分:-4, 码数:2, 倍数:3)
    - 对西方: -8分 (基础分:-2, 码数:3, 倍数:4)
    - 对北方: +0分 (基础分:+0, 码数:0, 倍数:1)
- 玩家: 西方
  - 总分（未乘本方码）: +12分
  - 明细:
    - 对东方: +6分 (基础分:+2, 码数:2, 倍数:3)
    - 对南方: +4分 (基础分:+2, 码数:1, 倍数:2)
    - 对北方: +2分 (基础分:+2, 码数:0, 倍数:1)
- 玩家: 北方
  - 总分（未乘本方码）: -14分
  - 明细:
    - 对东方: -6分 (基础分:-2, 码数:2, 倍数:3)
    - 对南方: +0分 (基础分:+0, 码数:1, 倍数:2)
    - 对西方: -8分 (基础分:-2, 码数:3, 倍数:4)

**验证:** 
- 所有玩家的totalScore（已乘本方码）之和 = 0 ✓
- 所有玩家的subTotalScore（未乘本方码）之和 = -20 ✗ (应该为0)

---

## 案例10：自摸打烂，多个暗杠，高码

**输入信息:**
- 玩家信息:
  - 东方: 码数=4, 庄家=否
  - 南方: 码数=2, 庄家=是
  - 西方: 码数=3, 庄家=否
  - 北方: 码数=1, 庄家=否
- 胡牌信息:
  - 胡牌者: 南方
  - 胡牌类型: 打烂
  - 方式: 自摸
- 杠分信息:
  - 1. 暗杠: 东方暗杠
  - 2. 暗杠: 西方暗杠
  - 3. 点杠: 北方捡杠，东方点杠

**计算结果:**
- 玩家: 东方
  - 总分（未乘本方码）: +0分
  - 明细:
    - 对南方: +0分 (基础分:+0, 码数:2, 倍数:3)
    - 对西方: +0分 (基础分:+0, 码数:3, 倍数:4)
    - 对北方: +0分 (基础分:+0, 码数:1, 倍数:2)
- 玩家: 南方
  - 总分（未乘本方码）: +4分
  - 明细:
    - 对东方: +0分 (基础分:+0, 码数:4, 倍数:5)
    - 对西方: +0分 (基础分:+0, 码数:3, 倍数:4)
    - 对北方: +4分 (基础分:+2, 码数:1, 倍数:2)
- 玩家: 西方
  - 总分（未乘本方码）: +2分
  - 明细:
    - 对东方: +0分 (基础分:+0, 码数:4, 倍数:5)
    - 对南方: +0分 (基础分:+0, 码数:2, 倍数:3)
    - 对北方: +2分 (基础分:+1, 码数:1, 倍数:2)
- 玩家: 北方
  - 总分（未乘本方码）: -10分
  - 明细:
    - 对东方: +0分 (基础分:+0, 码数:4, 倍数:5)
    - 对南方: -6分 (基础分:-2, 码数:2, 倍数:3)
    - 对西方: -4分 (基础分:-1, 码数:3, 倍数:4)

**验证:** 
- 所有玩家的totalScore（已乘本方码）之和 = 0 ✓
- 所有玩家的subTotalScore（未乘本方码）之和 = -4 ✗ (应该为0)

---

## 总结

所有10个测试案例的 `totalScore`（已乘本方码）之和都为0，这是正确的。

但是所有案例的 `subTotalScore`（未乘本方码）之和都不为0，这说明计算逻辑存在问题。需要检查买码规则的计算逻辑。
